import pandas as pd
import joblib
import numpy as np
from sklearn.model_selection import train_test_split


def test_model(test_data):
    # Load the model and the scaler
    model = joblib.load('trainmodel/model.pkl')
    scaler = joblib.load('trainmodel/scaler.pkl')

    # Preprocess the test data
    test_data = scaler.transform(test_data)
    #test_data = test_data[:, :-1]

    # Use the model to make predictions
    predictions = model.predict(test_data)

    return predictions

def main():
    # Test data
    test_data = """
14640,501.3240051,210.2915955,90.3317337,0.903040886,15119,0.586538434,Cammeo
12256,470.1080017,207.9800568,75.71490479,0.931379855,12541,0.738313258,Cammeo
14362,479.9309998,202.702652,90.70674896,0.894290566,14606,0.591466904,Cammeo
12091,463.3510132,203.5943909,76.65410614,0.926414967,12298,0.793060482,Cammeo
12605,447.6610107,183.5011902,88.51618958,0.875965416,12859,0.595755756,Cammeo
14697,495.8829956,208.1583862,90.96687317,0.899457633,15073,0.594923913,Cammeo
14337,501.7659912,219.3126678,83.44644165,0.92478472,14631,0.743157804,Cammeo
13760,474.1879883,198.3915558,89.04605103,0.893612206,13989,0.633750916,Cammeo
16022,524.8729858,221.5270538,93.63528442,0.906278491,16545,0.542236388,Cammeo
11510,433.5140076,180.3823242,82.62195587,0.888932645,11827,0.767026544,Cammeo
12798,469.2980042,202.1654053,81.58068085,0.914964497,13152,0.780365825,Cammeo
13683,481.5710144,206.9267731,84.89906311,0.911957145,13922,0.762199223,Cammeo
14379,495.151001,212.0209656,87.81466675,0.910195351,14834,0.790793598,Cammeo
13404,468.2149963,191.5484161,90.53829956,0.881242037,13804,0.706514835,Cammeo
12858,466.1629944,198.5473785,83.7596283,0.906659961,13095,0.549275935,Cammeo
15456,508.8210144,214.3044128,93.45649719,0.899901927,15884,0.780251384,Cammeo
14149,474.9519958,195.3551025,93.33526611,0.878483713,14454,0.605693519,Cammeo
13091,473.1520081,203.8627014,82.55069733,0.914346457,13451,0.75235635,Cammeo
16403,521.9089966,215.1509094,98.40094757,0.889282763,16867,0.588765264,Cammeo
13681,478.5379944,202.7610779,87.02304077,0.903214216,14015,0.641938806,Cammeo
14263,489.4460144,205.8117828,89.50908661,0.900475144,14637,0.663179457,Cammeo
12068,457.7390137,196.4420624,79.54393768,0.914350748,12347,0.599503219,Cammeo
15710,517.0700073,214.7502136,95.24736023,0.896261394,16259,0.607595921,Cammeo
15545,510.2839966,213.4366455,93.55502319,0.898815632,15909,0.568165183,Cammeo
12720,449.6239929,178.6147766,92.7516861,0.854602098,13095,0.743859649,Cammeo
15073,498.3619995,205.8031006,93.99627686,0.889605761,15476,0.613921463,Cammeo
11771,441.8599854,186.9977722,81.26961517,0.900622606,12109,0.619265556,Cammeo
14873,499.6159973,210.2774963,91.58361816,0.900170863,15195,0.573030233,Cammeo
14092,499.4169922,210.9630127,86.79673004,0.911440909,14618,0.772926748,Cammeo
14558,496.3049927,204.3606262,91.956604,0.893042564,14908,0.569472671,Cammeo
13321,473.9930115,199.2725677,85.92883301,0.90225035,13758,0.564568758,Cammeo
10796,413.4200134,170.7816467,80.99688721,0.880378544,10980,0.623037875,Cammeo
14444,491.1440125,203.5071869,91.60269928,0.892967999,14773,0.577944934,Cammeo
13313,470.9070129,198.2149353,86.27212524,0.900311887,13560,0.576969743,Cammeo
15578,509.598999,216.9094849,92.61865234,0.904255331,15864,0.808826566,Cammeo
13930,495.2709961,213.5266418,84.43373108,0.918498337,14564,0.54963702,Cammeo
12092,449.1889954,192.5794983,80.42227936,0.908628404,12298,0.583928943,Cammeo
13245,476.1369934,204.944397,83.1582489,0.91397965,13536,0.799625695,Cammeo
14572,497.5509949,211.0804596,88.70967865,0.907401562,14926,0.626590967,Cammeo
12470,455.8970032,192.4611511,83.3955307,0.901244462,12704,0.581297755,Cammeo
15777,515.684021,218.6982422,93.20509338,0.904637814,16111,0.567191541,Cammeo
14435,491.9039917,207.4626312,89.70562744,0.901684701,14842,0.577977955,Cammeo
12745,470.3039856,205.0926819,79.50904083,0.921796679,12940,0.533174336,Cammeo
13533,473.9320068,196.1175537,88.91679382,0.891314685,13897,0.60455662,Cammeo
12551,459.7290039,197.6823425,81.57028198,0.910897315,12741,0.818935156,Cammeo
14078,478.4700012,203.645462,88.56031036,0.90049088,14280,0.744395077,Cammeo
13057,460.1679993,187.128479,90.31277466,0.875827432,13385,0.750790656,Cammeo
14824,499.0750122,212.4864197,89.89486694,0.906100869,15141,0.579198241,Cammeo
14189,491.9729919,209.9364319,86.80909729,0.910503268,14496,0.55098635,Cammeo
15418,504.7590027,209.923996,94.43704987,0.893097579,15779,0.582690835,Cammeo
14828,493.5,209.9035645,90.66991425,0.901892841,15090,0.606511772,Cammeo
11774,447.9330139,186.0179291,81.6740036,0.898455203,12103,0.560026646,Cammeo
13335,469.7139893,199.297226,85.91238403,0.902315319,13657,0.616789997,Cammeo
11350,445.8210144,195.9520874,74.59088135,0.924715579,11544,0.584298611,Cammeo
13484,480.7860107,204.2075958,84.90129089,0.909474492,13827,0.658559203,Cammeo
13189,482.3670044,203.7174377,84.41487122,0.910107434,13635,0.596355557,Cammeo
12495,458.4070129,187.6042023,87.0256958,0.885898411,12993,0.674931109,Cammeo
12712,470.5620117,202.1971436,81.30088043,0.915601373,13053,0.814871788,Cammeo
13446,475.1279907,198.6995544,87.37929535,0.898117363,13765,0.575722516,Cammeo
14294,514.4769897,226.4072723,81.59251404,0.932805836,14731,0.511011004,Cammeo
12158,447.3770142,184.0953064,84.91305542,0.887272775,12467,0.631584406,Cammeo
13918,489.0400085,207.8817444,86.49022675,0.909339488,14263,0.718756437,Cammeo
13502,473.0119934,198.1473846,88.03559113,0.895881295,13778,0.753880501,Cammeo
13314,474.0870056,203.9480133,83.6628418,0.911988139,13627,0.747138023,Cammeo
14226,492.1950073,207.0195618,88.36334229,0.904329181,14465,0.579140186,Cammeo
12916,471.1960144,201.0029144,82.65473938,0.911539912,13199,0.557036281,Cammeo
13372,470.4030151,196.0814667,88.71108246,0.891805232,13745,0.583624303,Cammeo
14314,484.7309875,206.8655396,88.56289673,0.903722763,14536,0.753368437,Cammeo
13567,475.17099,197.2946777,88.91294098,0.892695367,13940,0.637696803,Cammeo
14602,500.2330017,218.4880524,85.67758179,0.919906199,14827,0.583636463,Cammeo
11846,445.8909912,192.9521942,78.47179413,0.913566053,12010,0.577966452,Cammeo
14482,486.1629944,201.8145294,92.54988098,0.88864857,14825,0.64255923,Cammeo
12886,455.5180054,189.8598938,87.49918365,0.887471914,13080,0.592296362,Cammeo
11718,449.3439941,189.1406708,80.11981964,0.905849755,12133,0.630542397,Cammeo
13790,479.2999878,198.9013214,90.1360321,0.891424298,14190,0.5869084,Cammeo
14379,494.303009,205.5262604,90.39722443,0.898079634,14768,0.578864753,Cammeo
11931,445.1010132,187.920517,82.14220428,0.899407387,12174,0.648142099,Cammeo
12732,465.4909973,192.4536743,85.18263245,0.896712422,13105,0.569970429,Cammeo
12044,449.1669922,188.3632507,82.49445343,0.898997366,12342,0.56838131,Cammeo
14256,492.927002,209.8032074,87.69036865,0.90846318,14730,0.702266037,Cammeo
14283,482.697998,202.3656311,90.6138916,0.894147217,14595,0.636497319,Cammeo
11852,446.0769958,192.0542755,79.09918976,0.91124779,12029,0.716999412,Cammeo
13204,473.8160095,203.7746582,83.10990143,0.913048029,13430,0.593065023,Cammeo
13615,468.0559998,192.8277893,91.15475464,0.881209314,13855,0.583633423,Cammeo
13309,460.9219971,191.4629669,88.95413971,0.885519445,13540,0.653747916,Cammeo
12736,447.8699951,182.7711792,89.68170929,0.871341288,12964,0.752718687,Cammeo
14184,479.2340088,197.4643097,92.07521057,0.884633064,14537,0.60383141,Cammeo
14792,499.2030029,206.160614,92.68034363,0.893253148,15326,0.69468838,Cammeo
10937,424.5859985,177.1670532,79.75700378,0.892938018,11103,0.59521091,Cammeo
14011,493.8789978,212.6303101,85.02820587,0.916564226,14336,0.627986193,Cammeo
13487,477.2539978,205.0457153,84.28226471,0.911616743,13772,0.737357199,Cammeo
13115,461.0360107,195.0187378,86.78283691,0.895531833,13381,0.738457203,Cammeo
14518,491.2219849,203.7610626,92.34289551,0.891412914,14877,0.741319418,Cammeo
10610,410.506012,171.1561737,79.3459549,0.88605088,10769,0.825103045,Cammeo
13173,467.4760132,194.6764526,87.36396027,0.893649876,13443,0.573162794,Cammeo
14232,492.54599,205.026947,89.55808258,0.89955318,14620,0.715175867,Cammeo
12888,467.197998,199.1564178,83.28892517,0.908351004,13222,0.725839138,Cammeo
14300,504.3770142,212.5983734,87.49030304,0.911396861,14772,0.540438414,Cammeo
13446,476.0419922,200.0526733,86.59047699,0.901471555,13814,0.603934586,Cammeo
14250,486.1239929,201.2189331,91.93981934,0.889510691,14636,0.593675792,Cammeo
13634,491.1799927,209.1335297,83.73373413,0.916347444,14075,0.787910283,Cammeo
15752,519.8889771,216.7020416,94.21913147,0.900533557,16426,0.601221383,Cammeo
14892,503.3389893,209.6208954,91.80297089,0.899000525,15338,0.655659735,Cammeo
13636,482.053009,202.4046783,86.88379669,0.90318197,13982,0.584007859,Cammeo
13548,479.7489929,203.2718811,85.60246277,0.907003522,13850,0.554427922,Cammeo
13655,477.6260071,203.9560394,86.22283173,0.90624541,13857,0.73782891,Cammeo
14974,498.625,210.9239502,90.90399933,0.902361512,15212,0.640900552,Cammeo
14695,506.9159851,214.1055298,88.91370392,0.909693718,15086,0.546607673,Cammeo
15080,512.9459839,211.9261169,92.14079285,0.900537729,15533,0.566768169,Cammeo
15977,516.2089844,216.757843,94.92934418,0.898998737,16401,0.627508759,Cammeo
13380,469.177002,190.813324,91.01315308,0.878916919,13747,0.619616568,Cammeo
12006,463.381012,198.9684296,77.81851959,0.920343995,12344,0.535026729,Cammeo
14275,485.7879944,206.4619141,88.92573547,0.902489185,14469,0.547564268,Cammeo
15469,514.9069824,221.0183411,89.76701355,0.913805604,15860,0.541783392,Cammeo
13436,467.9590149,195.0228119,89.14904022,0.889404476,13798,0.796065867,Cammeo
13147,468.9200134,199.2277527,84.48080444,0.905642807,13431,0.68473959,Cammeo
13912,480.8429871,206.9070435,86.26381683,0.908942878,14107,0.806259036,Cammeo
15153,514.4039917,218.0923157,90.05229187,0.910772264,15628,0.680850089,Cammeo
11965,455.8179932,196.1618652,78.42881012,0.916595042,12247,0.659446657,Cammeo
10727,425.9020081,178.7144318,77.53144073,0.900995374,10960,0.564341307,Cammeo
13636,481.256012,203.9285736,86.18013763,0.906316519,13888,0.549705744,Cammeo
13650,475.2420044,199.3260803,87.97470856,0.897329748,13859,0.57213515,Cammeo
14284,499.9150085,213.1660614,86.92615509,0.913077474,14678,0.704582453,Cammeo
13654,477.9299927,199.3771515,87.67783356,0.898115993,13914,0.575753748,Cammeo
14828,494.2879944,202.1031494,95.03462219,0.882544816,15197,0.591794372,Cammeo
13787,474.3380127,194.6946259,91.07733154,0.883836567,14075,0.616178751,Cammeo
12744,467.9249878,200.6121674,81.70650482,0.913300693,13047,0.714509964,Cammeo
15149,509.1369934,214.0074615,91.28372955,0.90446651,15516,0.707104206,Cammeo
13728,488.1019897,208.9741211,84.64085388,0.914303243,14052,0.557935357,Cammeo
12386,467.8500061,201.9013062,79.30883026,0.919619679,12679,0.791842461,Cammeo
14753,494.8519897,212.1030121,89.36529541,0.906907558,15051,0.816888154,Cammeo
12924,474.4240112,203.019928,81.82215881,0.915188849,13150,0.535732031,Cammeo
14761,499.5109863,210.7987671,90.55553436,0.903027415,15197,0.658326626,Cammeo
13513,473.1029968,196.2790833,89.51602936,0.889946461,13867,0.749389946,Cammeo
15868,519.5289917,219.1789246,93.26964569,0.904939115,16281,0.571263969,Cammeo
    """

    # Convert the test data to a pandas DataFrame
    from io import StringIO
    test_data = pd.read_csv(StringIO(test_data), header=None)

    # Drop the last column (target class)
    test_data_features = test_data.drop(test_data.columns[-1], axis=1)
    print("test_data_features:", test_data )
    true_labels = test_data[test_data.columns[-1]]
    print("true_labels:", true_labels )

    # Test the model
    predictions = test_model(test_data)

    # Print the predictions
    print(predictions)

    # Calculate the accuracy
    accuracy = np.mean(predictions == true_labels)
    print("Model Accuracy:", accuracy)

if __name__ == '__main__':
    main()


